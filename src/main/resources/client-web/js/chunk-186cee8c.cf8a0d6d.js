(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-186cee8c"],{"033b":function(s,e,t){"use strict";var a=t("e0a2"),r=t.n(a);r.a},"188a":function(s,e,t){},1959:function(s,e,t){"use strict";t.d(e,"c",function(){return u}),t.d(e,"b",function(){return l}),t.d(e,"d",function(){return f}),t.d(e,"e",function(){return h}),t.d(e,"a",function(){return w});t("c5f6"),t("96cf");var a=t("3b8d"),r=t("9f30"),n=t("6ace"),o=t("db49"),i=t("bc3a"),c=t.n(i);function u(s,e,t){return d.apply(this,arguments)}function d(){return d=Object(a["a"])(regeneratorRuntime.mark(function s(e,t,a){var r,o,i,c,u,d,p,f;return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:if(r=Number(Object(n["a"])(e.amount,e.fee)),o=0,i=t.nonce,c=e.amount,u=0,6===a&&2===a){s.next=8;break}if(!(t.balance<r)){s.next=8;break}return s.abrupt("return",{success:!1,data:"Your balance is not enough."});case 8:if(4===a?u=-1:5===a?u=-1:6===a?(r=e.amount,o=-1,i=e.depositHash.substring(e.depositHash.length-16),c=e.amount-e.fee):9===a&&(r=e.amount,o=-1,i=e.depositHash.substring(e.depositHash.length-16),c=e.amount-e.fee,u=(new Date).valueOf()+2592e5),d=[{address:e.fromAddress,assetsChainId:e.assetsChainId,assetsId:e.assetsId,amount:r,locked:o,nonce:i}],2!==a||e.assetsChainId===Object(n["d"])()){s.next=19;break}return d[0].amount=e.amount,s.next=14,l(Object(n["d"])(),e.assetsId,e.fromAddress);case 14:if(p=s.sent,!(p.data.balance<1e5)){s.next=18;break}return console.log("余额小于手续费"),s.abrupt("return");case 18:d.push({address:e.fromAddress,assetsChainId:Object(n["d"])(),assetsId:e.assetsId,amount:1e5,locked:o,nonce:p.data.nonce});case 19:if(f=[],15!==a&&17!==a){s.next=22;break}return s.abrupt("return",{success:!0,data:{inputs:d,outputs:f}});case 22:if(16!==a){s.next=28;break}if(e.toAddress){s.next=27;break}return s.abrupt("return",{success:!0,data:{inputs:d,outputs:f}});case 27:c=e.value;case 28:return f=[{address:e.toAddress?e.toAddress:e.fromAddress,assetsChainId:e.assetsChainId,assetsId:e.assetsId,amount:c,lockTime:u}],s.abrupt("return",{success:!0,data:{inputs:d,outputs:f}});case 30:case"end":return s.stop()}},s)})),d.apply(this,arguments)}function l(){return p.apply(this,arguments)}function p(){return p=Object(a["a"])(regeneratorRuntime.mark(function s(){var e,t,a,n=arguments;return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:2,t=n.length>1&&void 0!==n[1]?n[1]:1,a=n.length>2?n[2]:void 0,s.next=5,Object(r["b"])("/","getAccountBalance",[e,t,a]).then(function(s){return s.hasOwnProperty("result")?{success:!0,data:{balance:s.result.balance,nonce:s.result.nonce}}:{success:!1,data:s}}).catch(function(s){return{success:!1,data:s}});case 5:return s.abrupt("return",s.sent);case 6:case"end":return s.stop()}},s)})),p.apply(this,arguments)}function f(s,e){return b.apply(this,arguments)}function b(){return b=Object(a["a"])(regeneratorRuntime.mark(function s(e,t){return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:return o["e"].method="setProperty",o["e"].params=[e,t],s.abrupt("return",c.a.post(o["d"],o["e"]).then(function(s){return console.log(s),s.data.hasOwnProperty("result")?{success:s.data.result}:{success:!1,data:s.error}}).catch(function(s){console.log(s)}));case 3:case"end":return s.stop()}},s)})),b.apply(this,arguments)}function h(s){return m.apply(this,arguments)}function m(){return m=Object(a["a"])(regeneratorRuntime.mark(function s(e){return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(r["b"])("/","validateTx",[e]).then(function(s){if(s.hasOwnProperty("result")){var t=s.result.value;return Object(r["b"])("/","broadcastTx",[e]).then(function(s){return s.hasOwnProperty("result")?{success:!0,hash:t}:{success:!1,data:s.error}}).catch(function(s){return{success:!1,data:s}})}return{success:!1,data:s.error}}).catch(function(s){return{success:!1,data:s}});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},s)})),m.apply(this,arguments)}function w(s){return v.apply(this,arguments)}function v(){return v=Object(a["a"])(regeneratorRuntime.mark(function s(e){return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,Object(r["a"])("","getContractConstructor",[e]).then(function(s){return s.hasOwnProperty("result")?{success:!0,data:s.result.constructor}:{success:!1,data:s.error}}).catch(function(s){return{success:!1,data:s}});case 2:return s.abrupt("return",s.sent);case 3:case"end":return s.stop()}},s)})),v.apply(this,arguments)}},"2e64":function(s,e,t){"use strict";var a=t("ff03"),r=t.n(a);r.a},7672:function(s,e,t){"use strict";var a=t("188a"),r=t.n(a);r.a},b301:function(s,e,t){"use strict";var a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"back",attrs:{backUrl:s.backUrl}},[t("span",{staticClass:"back-box",on:{click:s.back}},[t("i",{staticClass:"el-icon-arrow-left"}),t("span",[s._v(s._s(s.backTitle))])])])},r=[],n={props:{backTitle:{type:String,default:""},backUrl:{type:String,default:"1"},backParams:{type:String,default:""}},methods:{back:function(){"1"===this.backUrl?this.$router.go(-1):this.$router.push({name:this.backUrl})}}},o=n,i=(t("2e64"),t("2877")),c=Object(i["a"])(o,a,r,!1,null,null,null);e["a"]=c.exports},d1f0:function(s,e,t){"use strict";var a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("el-dialog",{staticClass:"password-dialog",attrs:{title:s.$t("password.password1"),visible:s.passwordVisible,top:"30vh",width:"30rem","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){s.passwordVisible=e},open:s.passwordShow,close:s.passwordClose}},[t("el-form",{ref:"passwordForm",attrs:{model:s.passwordForm,rules:s.passwordRules},nativeOn:{submit:function(s){s.preventDefault()}}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[s._v(s._s(s.$t("password.password1")))]),t("el-form-item",{attrs:{prop:"password"}},[t("el-input",{ref:"inpus",attrs:{type:"password",maxlength:22},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&s._k(e.keyCode,"enter",13,e.key,"Enter")?null:s.enterSubmit("passwordForm")}},model:{value:s.passwordForm.password,callback:function(e){s.$set(s.passwordForm,"password",e)},expression:"passwordForm.password"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:s.passwordClose}},[s._v(s._s(s.$t("password.password2")))]),t("el-button",{attrs:{type:"success",id:"passwordInfo"},on:{click:function(e){return s.dialogSubmit("passwordForm")}}},[s._v(s._s(s.$t("password.password3"))+"\n    ")])],1)],1)},r=[],n={props:{},data:function(){var s=function(s,e,t){t()};return{passwordVisible:!1,passwordForm:{password:""},passwordRules:{password:[{validator:s,trigger:["blur","change"]}]}}},created:function(){},mounted:function(){},watch:{passwordVisible:function(s){s&&setTimeout(function(){},200)}},methods:{enterSubmit:function(s){this.passwordForm.password&&this.dialogSubmit(s)},passwordShow:function(){},passwordClose:function(){this.$refs["passwordForm"].resetFields(),this.passwordVisible=!1},showPassword:function(s){this.passwordVisible=s},dialogSubmit:function(s){var e=this;this.$refs[s].validate(function(s){if(!s)return!1;e.$emit("passwordSubmit",e.passwordForm.password),e.passwordVisible=!1})}}},o=n,i=(t("7672"),t("2877")),c=Object(i["a"])(o,a,r,!1,null,null,null);e["a"]=c.exports},e0a2:function(s,e,t){},eb26:function(s,e,t){"use strict";t.r(e);var a=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"new_address bg-gray"},[t("div",{staticClass:"bg-white"},[t("div",{staticClass:"w1200"},[t("BackBar",{attrs:{backTitle:s.$t("address.address0")}}),t("h3",{staticClass:"title"},[s._v(s._s(s.$t("setAlias.setAlias0")))])],1)]),t("div",{staticClass:"new w1200 mt_20 bg-white"},[t("div",{staticClass:"w630"},[t("h3",{staticClass:"tc mzt_20"},[s._v(s._s(this.$route.query.address))]),t("div",{staticClass:"tip bg-gray"},[t("p",[s._v("• "+s._s(s.$t("setAlias.setAlias1"))+s._s(s.addressInfo.symbol)+s._s(s.$t("setAlias.setAlias11")))]),t("p",[s._v("• "+s._s(s.$t("setAlias.setAlias2"))+s._s(s.addressInfo.symbol))])]),t("el-form",{ref:"aliasForm",staticClass:"mb_20",attrs:{model:s.aliasForm,"status-icon":"",rules:s.aliasRules}},[t("el-form-item",{attrs:{label:s.$t("public.alias"),prop:"alias"}},[t("span",{staticClass:"balance font12 fr"},[s._v(s._s(s.$t("public.usableBalance"))+"："+s._s(s.addressInfo.balance))]),t("el-input",{attrs:{type:"text",maxlength:"20",autocomplete:"off"},model:{value:s.aliasForm.alias,callback:function(e){s.$set(s.aliasForm,"alias",e)},expression:"aliasForm.alias"}})],1),t("div",{staticClass:"div-data font14"},[s._v("\n          "+s._s(s.$t("public.fee"))+": "),t("label",[s._v("0.001 "),t("span",{staticClass:"fCN"},[s._v(s._s(s.addressInfo.symbol))])])]),t("el-form-item",{staticClass:"form-next"},[t("el-button",{attrs:{type:"success"},on:{click:function(e){return s.submitAliasForm("aliasForm")}}},[s._v(" "+s._s(s.$t("public.next")))])],1),t("div",{staticClass:"tc font18 mzt_20"},[s._v("\n          "+s._s(s.$t("setAlias.setAlias3"))+": 1.001\n        ")])],1)],1)]),t("Password",{ref:"password",on:{passwordSubmit:s.passSubmit}})],1)},r=[],n=(t("96cf"),t("3b8d")),o=(t("ac4d"),t("8a81"),t("ac6a"),t("0ad0")),i=t.n(o),c=t("1959"),u=t("d1f0"),d=t("b301"),l=t("db49"),p=t("6ace"),f={data:function(){var s=this,e=function(e,t,a){var r=/^(?!_)(?!.*?_$)[a-z0-9_]+$/;""===t?a(new Error(s.$t("setAlias.setAlias4"))):r.exec(t)?a():a(new Error(s.$t("setAlias.setAlias5")))};return{aliasForm:{alias:""},aliasRules:{alias:[{validator:e,trigger:"blur"}]},addressInfo:"",balanceInfo:""}},created:function(){var s=!0,e=!1,t=void 0;try{for(var a,r=Object(p["c"])(0)[Symbol.iterator]();!(s=(a=r.next()).done);s=!0){var n=a.value;n.address===this.$route.query.address&&(this.addressInfo=n)}}catch(o){e=!0,t=o}finally{try{s||null==r.return||r.return()}finally{if(e)throw t}}this.getNulsBalance(Object(p["d"])(),1,this.$route.query.address)},watch:{addressInfo:function(s,e){s.address!==e.address&&e.address&&(this.transferForm.fromAddress=this.addressInfo.address)}},components:{Password:u["a"],BackBar:d["a"]},methods:{submitAliasForm:function(s){var e=this;this.$refs[s].validate(function(s){if(!s)return!1;e.balanceInfo.balance>1001e5?e.$refs.password.showPassword(!0):e.$message({message:e.$t("newConsensus.newConsensus7"),type:"error",duration:1e3})})},getNulsBalance:function(){var s=Object(n["a"])(regeneratorRuntime.mark(function s(e,t,a){var r=this;return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,this.$post("/","getAccountBalance",[e,t,a]).then(function(s){s.hasOwnProperty("result")?r.balanceInfo={balance:s.result.balance,nonce:s.result.nonce}:r.$message({message:r.$t("public.err2")+s,type:"error",duration:1e3})}).catch(function(s){r.$message({message:r.$t("public.err3")+s,type:"error",duration:1e3})});case 2:case"end":return s.stop()}},s,this)}));function e(e,t,a){return s.apply(this,arguments)}return e}(),passSubmit:function(){var s=Object(n["a"])(regeneratorRuntime.mark(function s(e){var t,a,r,n,o,u,d,f,b=this;return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:if(t=i.a.decrypteOfAES(this.addressInfo.aesPri,e),a=i.a.importByKey(Object(p["d"])(),t,e),a.address!==this.addressInfo.address){s.next=19;break}return r=i.a.getAddressByPub(Object(p["d"])(),1,l["a"]),n={fromAddress:this.addressInfo.address,toAddress:r,assetsChainId:Object(p["d"])(),assetsId:1,amount:1e8,fee:1e5},s.next=7,Object(c["c"])(n,this.balanceInfo,3);case 7:return o=s.sent,u={fromAddress:this.addressInfo.address,alias:this.aliasForm.alias},s.next=11,i.a.transactionAssemble(o.data.inputs,o.data.outputs,"",3,u);case 11:return d=s.sent,s.next=14,i.a.transactionSerialize(i.a.decrypteOfAES(this.addressInfo.aesPri,e),this.addressInfo.pub,d);case 14:return f=s.sent,s.next=17,Object(c["e"])(f).then(function(s){s.success?b.toUrl("txList"):b.$message({message:b.$t("error."+s.data.code),type:"error",duration:3e3})}).catch(function(s){b.$message({message:b.$t("public.err0")+s,type:"error",duration:1e3})});case 17:s.next=20;break;case 19:this.$message({message:this.$t("address.address13"),type:"error",duration:1e3});case 20:case"end":return s.stop()}},s,this)}));function e(e){return s.apply(this,arguments)}return e}(),toUrl:function(s){this.$router.push({name:s})}}},b=f,h=(t("033b"),t("2877")),m=Object(h["a"])(b,a,r,!1,null,null,null);e["default"]=m.exports},ff03:function(s,e,t){}}]);
//# sourceMappingURL=chunk-186cee8c.cf8a0d6d.js.map